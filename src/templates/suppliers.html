{% extends "base.html" %}
{% block title %}Fornitori e Prodotti{% endblock %}

{% block content %}
<div class="form-header">
  <h1>Gestione Fornitori e Prodotti</h1>
</div>

<form method="POST" action="{{ url_for('supplier_bp.add_supplier') }}">
  <h3>Aggiungi Fornitore</h3>
  <input type="text" name="name" placeholder="Nome Fornitore" required>
  <input type="email" name="email" placeholder="Email" required>
  <input type="text" name="phone" placeholder="Telefono" required>
  <button type="submit">Salva Fornitore</button>
</form>

<hr>

<form method="POST" action="{{ url_for('supplier_bp.add_product') }}">
  <h3>Aggiungi Prodotto</h3>
  <input type="text" name="name" placeholder="Nome Prodotto" required>
  <input type="text" name="unit" placeholder="UnitÃ  di misura" required>
  <select name="supplier_id" required>
    <option value="">Seleziona Fornitore</option>
    {% for supplier in suppliers %}
      <option value="{{ supplier.id }}">{{ supplier.name }}</option>
    {% endfor %}
  </select>
  <button type="submit">Salva Prodotto</button>
</form>

<hr>

<h3>Fornitori e Prodotti</h3>
{% for supplier in suppliers %}
  <div class="supplier-block">
    <strong>{{ supplier.name }}</strong> - {{ supplier.email }} - {{ supplier.phone }}
    <ul>
      {% for product in supplier.products %}
        <li>{{ product.name }} ({{ product.unit }})</li>
      {% endfor %}
    </ul>
  </div>
{% endfor %}
{% endblock %}